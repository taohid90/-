<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rafid - Live Channels</title>

  <!-- Google Font: Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary-color: #007bff;
      --active-glow-color: rgba(0, 123, 255, 0.5);
      --dark-bg: #121212;
      --medium-bg: #1a1a1a;
      --light-bg: #2c2c2c;
      --text-color: #f0f0f0;
      --text-secondary-color: #a0a0a0;
      --border-color: #383838;
      --shadow-color: rgba(0, 0, 0, 0.5);
    }
    html, body {
      margin: 0; padding: 0; width: 100%; height: 100vh;
      overflow: hidden; background-color: var(--dark-bg);
      font-family: 'Poppins', sans-serif;
      display: flex; flex-direction: column;
    }

    /* --- প্লেয়ার কন্টেইনার এবং iframe --- */
    #playerContainer {
      width: 100%;
      aspect-ratio: 16 / 9; 
      background-color: #000;
      position: relative;
      border: none;
      transition: opacity 0.4s ease-in-out; 
      box-shadow: 0 5px 20px var(--shadow-color);
    }
    #playerIframe { width: 100%; height: 100%; border: none; }

    /* --- চ্যানেল গ্রিড সেকশন --- */
    .channel-grid-section {
      flex-grow: 1;
      background-color: var(--medium-bg);
      padding: 25px 20px;
      overflow-y: auto;
      border-top: 1px solid var(--border-color);
    }
    .channel-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* --- চ্যানেল বাটন স্টাইল --- */
    .channel-btn {
      background: none;
      border: none;
      border-radius: 12px;
      padding: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
      text-align: center;
      color: var(--text-secondary-color);
      font-size: 14px;
      font-weight: 500;
    }
    .channel-btn:hover {
        background-color: var(--light-bg);
        transform: translateY(-3px);
    }

    /* --- চ্যানেল ইমেজ স্টাইল --- */
    .channel-btn img {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      display: block;
      margin: 0 auto 12px auto;
      border: 2px solid var(--border-color); 
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    .channel-btn:hover img {
        border-color: var(--text-secondary-color);
        transform: scale(1.05);
    }

    /* --- সক্রিয় চ্যানেলের জন্য বিশেষ স্টাইল --- */
    .channel-btn.active {
      color: var(--text-color);
      font-weight: 600;
    }
    .channel-btn.active img {
      border-color: var(--primary-color);
      transform: scale(1.1);
      box-shadow: 0 0 15px var(--active-glow-color); 
    }

    /* --- মোবাইল ডিভাইসের জন্য রেসপন্সিভ ডিজাইন --- */
    @media (max-width: 600px) {
      .channel-grid-section {
        padding: 20px 15px;
      }
      .channel-grid {
        grid-template-columns: repeat(auto-fill, minmax(95px, 1fr));
        gap: 15px;
      }
      .channel-btn img {
        width: 75px;
        height: 75px;
      }
      .channel-btn span {
        font-size: 13px;
      }
    }
  </style>
</head>
<body>

  <!-- প্লেয়ার কন্টেইনার -->
  <div id="playerContainer">
    <!-- এখানে iframe প্রথমে খালি থাকবে এবং জাভাস্ক্রিপ্ট দিয়ে তৈরি হবে -->
  </div>

  <!-- চ্যানেল গ্রিড সেকশন (আপনার দেওয়া নতুন চ্যানেল দিয়ে আপডেট করা) -->
  <div class="channel-grid-section">
    <div class="channel-grid">
      
      <!-- অনুগ্রহ করে প্রতিটি data-url এ আপনার সঠিক স্ট্রিম লিঙ্ক দিন -->
      <button class="channel-btn active" data-url="https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1701/output/1701-audio_113312_eng=113200-video=1692000.m3u8">
        <img src="https://fredflix.fun/assets/images/67ea22d5e4caf_Jamuna%20Tv1664825738%20(1).png" alt="Jamuna TV">
        <span>Jamuna TV</span>
      </button>

      <button class="channel-btn" data-url="https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1702/output/1702-audio_113322_eng=113200-video=1692000.m3u8">
        <img src="https://fredflix.fun/assets/images/67ea22b7524b9_images%20(10).png" alt="Channel 24">
        <span>Somoy TV</span>
      </button>

      <button class="channel-btn" data-url="https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1704/output/1704-audio_113342_eng=113200-video=1692000.m3u8">
        <img src="https://fredflix.fun/assets/images/67ea296a3e129_20240721_151402.png" alt="NTV">
        <span>Independent</span>
      </button>

      <button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=a108c4e9-ccfa-42f2-8f8f-169ded28cca2">
        <img src="https://fredflix.fun/assets/images/67ea26577175a_20250331_111646.png" alt="Desh TV">
        <span>Ananda TV</span>
      </button>

      <button class="channel-btn" data-url="https://d1e7rcqq4o2ma.cloudfront.net/bpk-tv/1705/output/1705-audio_113352_eng=113200-video=1692000.m3u8">
        <img src="https://fredflix.fun/assets/images/67ea22f304f27_ekattortv.png" alt="Ekattor TV">
        <span>Ekattor TV</span>
      </button>

      <button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=21e75798-3b6a-4214-9d93-b3fecaa4e700">
        <img src="https://fredflix.fun/assets/images/67ea1d9cca754_20240721_152924.png" alt="Somoy TV">
        <span>NTV</span>
      </button>

      <button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=0579659b-2854-40d1-ad6a-69b70641ad17">
        <img src="https://fredflix.fun/assets/images/67ea20f5d4819_20240721_140150.png" alt="Independent TV">
        <span>Ekhon TV</span>
      </button>
      
      <button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=0be12af9-e713-4c65-b4ed-b735793a0418">
        <img src="https://fredflix.fun/assets/images/67ea21b9460cc_20240801_211008.png" alt="DBC News">
        <span>Depto TV</span>
      </button>
      
      <button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=0ac6af3d-acce-4d9d-9ce5-32d4b53f9326">
        <img src="https://fredflix.fun/assets/images/67ea26a6ded66_20250331_111343.png" alt="Geo Super">
        <span>Global TV</span>
      </button>

      <button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=0875f2c8-2043-499b-9472-2872412a6340">
        <img src="https://fredflix.fun/assets/images/67ea2941076e8_20250331_112748.png" alt="Ten Sports">
        <span>DBC News</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=6cce2b86-f371-4184-b288-988de0607926">
        <img src="https://fredflix.fun/assets/images/67e8dea681363_News%2024%20BD%20(500x296).jpg" alt="Ten Sports">
        <span>News 24</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=6cce2b86-f371-4184-b288-988de0607926">
        <img src="https://fredflix.fun/assets/images/67ea266457398_20250331_111614.png" alt="Ten Sports">
        <span>Channel 9</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=4d629b90-cfc2-4426-9eef-62b879efdb02">
        <img src="https://fredflix.fun/assets/images/67ea28c12f09f_20250331_112024.png" alt="Ten Sports">
        <span>Asian TV</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=70e97db9-5a9e-4642-874e-af3d30ba9925">
        <img src="https://fredflix.fun/assets/images/67ea216dd5da5_download%20(18)%20(1).jpeg" alt="Ten Sports">
        <span>RTV</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=92890d5c-473a-454c-ad10-2c6c0c91062a">
        <img src="https://fredflix.fun/assets/images/67ea1d81542b2_20240801_210529.png" alt="Ten Sports">
        <span>Boishakhi TV</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=b3f0df76-15ba-4ede-a7de-bbaaf23a630e">
        <img src="https://fredflix.fun/assets/images/67ea214f73d28_ekushey_tv.png" alt="Ten Sports">
        <span>ETV</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=6cce2b86-f371-4184-b288-988de0607926">
        <img src="https://fredflix.fun/assets/images/67ea1f5c3b7b1_images%20(7)%20(1).png" alt="Ten Sports">
        <span>My TV</span>
      </button>
<button class="channel-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=20714fd4-dc3c-46d6-924f-3038d61f027c">
        <img src="https://fredflix.fun/assets/images/67e642e21d148_Channel%20i1664976520.png" alt="Ten Sports">
        <span>Channel i</span>
      </button>

    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const playerContainer = document.getElementById('playerContainer');
        const channelButtons = document.querySelectorAll('.channel-btn');
        // let ব্যবহার করা হয়েছে কারণ iframe এলিমেন্টটি পরে পরিবর্তন করা হবে
        let playerIframe = null; 

        /**
         * "ব্যাক বাটন" সমস্যা সমাধানের জন্য এই ফাংশনটি iframe এলিমেন্টকে প্রতিস্থাপন করে।
         * এটি ব্রাউজারের হিস্টোরিতে নতুন এন্ট্রি তৈরি করে না।
         * @param {string} url - যে স্ট্রিমটি লোড করতে হবে তার URL।
         */
        function loadStream(url) {
            // ১. প্লেয়ারটি প্রথমে ফেড-আউট হবে
            playerContainer.style.opacity = '0.3'; 

            setTimeout(() => {
                // ২. যদি আগে থেকে কোনো iframe থাকে, তবে তা সরিয়ে ফেলা হবে
                if (playerIframe) {
                    playerContainer.removeChild(playerIframe);
                }

                // ৩. নতুন একটি iframe এলিমেন্ট তৈরি করা হচ্ছে
                const newIframe = document.createElement('iframe');
                newIframe.id = 'playerIframe';
                newIframe.allow = 'autoplay; fullscreen';
                newIframe.allowFullscreen = true;
                newIframe.scrolling = 'no';
                newIframe.sandbox = 'allow-scripts allow-same-origin allow-fullscreen allow-presentation';
                newIframe.src = url;

                // ৪. নতুন iframe টি প্লেয়ার কন্টেইনারে যোগ করা হচ্ছে
                playerContainer.appendChild(newIframe);
                playerIframe = newIframe; // রেফারেন্স আপডেট করা হচ্ছে

                // ৫. নতুন চ্যানেল লোড হওয়ার পর প্লেয়ারটি আবার ফেড-ইন হবে
                playerIframe.onload = () => {
                    playerContainer.style.opacity = '1';
                    playerIframe.onload = null; // মেমোরি লিক এড়ানোর জন্য
                };

            }, 400); // অ্যানিমেশনের জন্য 400 মিলিসেকেন্ড সময় দেওয়া হলো
        }

        channelButtons.forEach(button => {
            button.addEventListener('click', function() {
                if (this.classList.contains('active')) return;
                
                const newUrl = this.dataset.url;
                loadStream(newUrl);

                channelButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // পেইজ লোড হওয়ার সাথে সাথে প্রথম চ্যানেলটি লোড হবে
        const firstActiveButton = document.querySelector('.channel-btn.active');
        if (firstActiveButton) {
            playerContainer.style.opacity = '0'; // শুরুতে অদৃশ্য থাকবে
            loadStream(firstActiveButton.dataset.url);
        }
    });
  </script>

</body>
</html>
