<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rafid</title>
  
  <!-- গুগল ফন্টস থেকে ফন্ট যোগ করা হয়েছে -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <!-- HLS.js লাইব্রেরি এখানে যোগ করা হলো, যা m3u8 ফাইল প্লে করতে প্রয়োজন হবে -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

  <style>
    :root {
      --primary-color: #007bff;
      --primary-gradient: linear-gradient(45deg, #007bff, #0056b3);
      --active-gradient: linear-gradient(45deg, #28a745, #218838);
      --dark-bg: #121212;
      --medium-bg: #1f1f1f;
      --light-bg: #2a2a2a;
      --text-color: #f0f0f0;
      --border-color: #444;
      --shadow-color: rgba(0, 0, 0, 0.4);
    }
    html, body {
      margin: 0; padding: 0; width: 100%; height: 100vh;
      overflow: hidden; background-color: var(--dark-bg);
      font-family: 'Poppins', 'Hind Siliguri', sans-serif;
      display: flex; flex-direction: column;
    }

    /* --- প্লেয়ার কন্টেইনার এবং এর ভেতরের এলিমেন্ট --- */
    #playerContainer {
      width: 100%;
      aspect-ratio: 16 / 9; 
      background-color: #000;
      position: relative;
      border: none;
      transition: opacity 0.4s ease-in-out;
      box-shadow: 0 5px 15px var(--shadow-color);
    }
    /* iframe এবং video ট্যাগের জন্য কমন স্টাইল */
    #playerContainer > iframe,
    #playerContainer > video {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* --- সার্ভার বাটন সেকশন --- */
    .server-section { 
      width: 100%; background-color: var(--medium-bg); padding: 15px 0; 
      overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; 
      scrollbar-width: none; text-align: center;
      border-top: 1px solid var(--border-color);
      border-bottom: 1px solid var(--border-color);
    }
    .server-section::-webkit-scrollbar { display: none; }
    .server-buttons { display: inline-block; padding: 0 10px; }

    /* --- নতুন ও আধুনিক সার্ভার বাটন স্টাইল --- */
    .server-btn { 
      position: relative; display: inline-flex; align-items: center;
      background: var(--light-bg); 
      color: var(--text-color); 
      border: 1px solid var(--border-color); 
      border-radius: 8px; 
      padding: 10px 20px; 
      margin: 0 8px; 
      font-size: 16px; font-weight: 600; 
      cursor: pointer; 
      transition: all 0.3s ease; 
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .server-btn .icon { margin-right: 8px; width: 18px; height: 18px; }
    .server-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      border-color: var(--primary-color);
    }
    .server-btn.active { 
      background: var(--active-gradient);
      border-color: #28a745;
      color: #fff; 
      box-shadow: 0 4px 10px rgba(40, 167, 69, 0.4); 
      padding-right: 45px; 
    }
    .tick { 
      display: inline-block; width: 8px; height: 16px; border: solid #fff; 
      border-width: 0 3px 3px 0; transform: rotate(45deg); position: absolute; 
      right: 18px; top: 50%; margin-top: -10px; opacity: 0; 
      transition: opacity 0.3s ease; 
    }
    .server-btn.active .tick { opacity: 1; }
    
    /* --- চ্যানেল ইনফরমেশন সেকশন --- */
    .info-section {
      flex-grow: 1; padding: 20px; overflow-y: auto;
      background-color: var(--dark-bg); color: var(--text-color);
    }
    .info-content { max-width: 900px; margin: 0 auto; text-align: left; }
    .match-banner {
      width: 339px; height: auto; display: block;
      margin-bottom: 20px; border-radius: 8px;
      background-color: var(--medium-bg);
    }
    .info-content .description { font-size: 16px; color: #ccc; line-height: 1.6; margin-bottom: 20px; }
    .info-content .meta-info {
      font-size: 14px; color: #aaa; background: var(--medium-bg);
      padding: 10px 15px; border-radius: 6px;
      border-left: 3px solid var(--primary-color); margin-bottom: 20px;
    }
    .share-section h3 {
      font-size: 18px; margin-bottom: 15px;
      border-bottom: 1px solid var(--border-color); padding-bottom: 10px;
    }
    .share-buttons a {
      display: inline-block; margin-right: 15px; color: #ccc;
      transition: color 0.3s, transform 0.3s;
    }
    .share-buttons a:hover { color: #fff; transform: scale(1.1); }
    .share-buttons svg { width: 28px; height: 28px; }
  </style>
</head>
<body>

  <!-- প্লেয়ার কন্টেইনার (এটি এখন ডাইনামিকভাবে পরিবর্তিত হবে) -->
  <div id="playerContainer">
    <!-- এখানে জাভাস্ক্রিপ্ট দিয়ে <video> বা <iframe> যোগ করা হবে -->
  </div>

  <!-- সার্ভার বাটন সেকশন -->
  <div class="server-section">
    <div class="server-buttons">
      <button class="server-btn active" data-url="https://aynaott.fredflix.fun/play.php?channel_id=fc95d30e-5323-4c12-bb38-7a1e3f04acc2">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
        T Sports <span class="tick"></span>
      </button>
      <button class="server-btn" data-url="https://live-test.tsports.com/live-01/master_1080.m3u8?hdntl=Expires=1750167391~_GO=Generated~URLPrefix=aHR0cHM6Ly9saXZlLXRlc3QudHNwb3J0cy5jb20v~Signature=AdXv3StHk8Khke493PZb3PIpU_cvZEh7qwHlcNqU194ZdqyRJCCfjrurKEqoMDvQQK04p2uw-ZX1jElMehac-TXyPRIF">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
        T Sports SD <span class="tick"></span>
      </button>
      <button class="server-btn" data-url="https://aynaott.fredflix.fun/play.php?channel_id=b1808fb2-8892-49dc-965e-d038e5334995">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
        Tnt Sports <span class="tick"></span>
      </button>
    </div>
  </div>
  
  <!-- চ্যানেল ইনফরমেশন এবং শেয়ার সেকশন -->
  <div class="info-section">
      <!-- ... (এই অংশের কোনো পরিবর্তন প্রয়োজন নেই) ... -->
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const playerContainer = document.getElementById('playerContainer');
        const serverButtons = document.querySelectorAll('.server-btn');
        let hlsInstance = null; // HLS.js এর ইনস্ট্যান্স রাখার জন্য

        // *** এই ফাংশনটি এখন লিঙ্ক পরীক্ষা করে প্লেয়ার বা iframe তৈরি করে ***
        function loadStream(url) {
            playerContainer.style.opacity = '0.3'; // অ্যানিমেশন শুরু

            setTimeout(() => {
                // কন্টেইনার খালি করা হচ্ছে
                playerContainer.innerHTML = '';
                // পুরোনো HLS ইনস্ট্যান্স নষ্ট করা হচ্ছে
                if (hlsInstance) {
                    hlsInstance.destroy();
                    hlsInstance = null;
                }

                // ধাপ ১: লিঙ্কটি কি সরাসরি ভিডিও স্ট্রিম (.m3u8)?
                if (url.includes('.m3u8')) {
                    // একটি <video> এলিমেন্ট তৈরি করা হচ্ছে
                    const video = document.createElement('video');
                    video.id = 'hlsPlayer';
                    video.controls = true;
                    video.autoplay = true;
                    playerContainer.appendChild(video);

                    // HLS.js দিয়ে স্ট্রিম প্লে করার লজিক
                    if (Hls.isSupported()) {
                        hlsInstance = new Hls();
                        hlsInstance.loadSource(url);
                        hlsInstance.attachMedia(video);
                    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                        // কিছু ব্রাউজার (যেমন Safari) সরাসরি m3u8 প্লে করতে পারে
                        video.src = url;
                    }

                // ধাপ ২: লিঙ্কটি যদি একটি ওয়েবপেজ হয় (অন্যান্য সব লিঙ্ক)
                } else {
                    // একটি <iframe> এলিমেন্ট তৈরি করা হচ্ছে
                    const iframe = document.createElement('iframe');
                    iframe.src = url;
                    iframe.allow = 'autoplay; fullscreen';
                    iframe.setAttribute('allowfullscreen', '');
                    iframe.setAttribute('scrolling', 'no');
                    iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-fullscreen allow-presentation');
                    playerContainer.appendChild(iframe);
                }

                playerContainer.style.opacity = '1'; // অ্যানিমেশন শেষ
            }, 400); // অ্যানিমেশনের জন্য সময়
        }

        serverButtons.forEach(button => {
            button.addEventListener('click', function() {
                if (this.classList.contains('active')) return;

                const newUrl = this.dataset.url;
                loadStream(newUrl);

                serverButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // পেইজ লোড হওয়ার সাথে সাথে প্রথম লিংকটি লোড হবে
        const firstActiveButton = document.querySelector('.server-btn.active');
        if (firstActiveButton) {
            playerContainer.style.opacity = '0';
            loadStream(firstActiveButton.dataset.url);
        }
    });
  </script>

</body>
</html>
